<!DOCTYPE html>
<html>
  <head>
    <title>Drop Tests</title>

    <script type="text/javascript" src="/js/ozpIwc-client.js"></script>
    <script type="text/javascript" src="/lib/owf7/owf-widget-debug.js"></script>
    <script type="text/javascript" src="/lib/owf7/jquery-2.1.0.min.js"></script>
    <link href="/lib/owf7/dragAndDrop.css" rel="stylesheet" type="text/css">

    <script>
        Ozone.eventing.Widget.widgetRelayURL = '/lib/owf7/rpc_relay.uncompressed.html';
        owfdojo.config.dojoBlankHtmlUrl="/lib/owf7/dojo-1.5.0-windowname-only/dojo/resources/blank.html";
    </script>

    <script type="text/javascript">
        OWF.ready(function() {
            var dragging=false;
            
            OWF.DragAndDrop.onDragStart(function(msg) {
              dragging = true;
              $('#drop').text("Started dragging "+msg);        
            });
            OWF.DragAndDrop.onDragStop(function(msg) {
                dragging = false;
                console.log("Stopped dragging ",arguments);
                $('#drop').text("Stopped dragging ",JSON.stringify(arguments));        
              $('#drop').css('border','5px solid red');
            });
            OWF.DragAndDrop.onDrop(function(msg) {
                $('#drop').text("Dropped "+msg);
            });
            
            
            $('#drop').mouseover(function() {
              if(dragging) {
                $('#status').text("Drop Enabled!");
                OWF.DragAndDrop.setDropEnabled(true);
              }
            }).mouseout(function() {
              if (dragging) {
                $('#status').text("Drop Disabled!");
                OWF.DragAndDrop.setDropEnabled(false);
                $('#drop').css('border','1px solid black');
              }
            }).mouseup(function() {
                $('#status').text("Mouse up!");
            });
        });        
    </script>

  </head>
<body>
    <div id="drop" style="border: 1px solid black; height: 100px; width: 100%;">Drop here!</div>
    <pre id="status"></pre>
</body>
</html>
